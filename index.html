<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CVORTEX - Dashboard de Atendimento</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Sidebar Toggle Button -->
    <button class="sidebar-toggle" onclick="toggleSidebar()">
        <i class="fas fa-chevron-left"></i>
    </button>
    
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="logo">
            <i class="fas fa-headset"></i>
            <span>CVORTEX</span>
        </div>
        <nav class="nav-menu">
            <a href="#" class="nav-item active" data-tela="tela1" onclick="showTela('tela1')">
                <i class="fas fa-chart-line"></i>
                <span>Painel Geral</span>
            </a>
            <a href="#" class="nav-item" data-tela="tela2" onclick="showTela('tela2')">
                <i class="fas fa-users"></i>
                <span>Painel Gestor</span>
            </a>
            <a href="#" class="nav-item" data-tela="tela3" onclick="showTela('tela3')">
                <i class="fas fa-clipboard-check"></i>
                <span>Aderência</span>
            </a>
        </nav>
        <div class="sidebar-footer">
            <div class="user-info">
                <img src="https://ui-avatars.com/api/?name=Geisa+Santos&background=6366f1&color=fff" alt="User">
                <div>
                    <span class="user-name">Geisa</span>
                    <span class="user-role">Gestora</span>
                </div>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <h1>Dashboard de Atendimento</h1>
                <p class="date-time" id="currentDateTime"></p>
            </div>
            <div class="header-right">
                <div class="header-stats">
                    <div class="stat-badge online">
                        <i class="fas fa-circle"></i>
                        <span id="agentesOnline">24</span> Agentes Online
                    </div>
                    <div class="stat-badge available">
                        <i class="fas fa-check-circle"></i>
                        <span id="agentesDisponiveis">18</span> Disponíveis
                    </div>
                    <div class="stat-badge pausa">
                        <i class="fas fa-pause-circle"></i>
                        <span id="agentesEmPausa">6</span> Em Pausa
                    </div>
                </div>
                <button class="refresh-btn" onclick="refreshData()">
                    <i class="fas fa-sync-alt"></i>
                    Atualizar
                </button>
            </div>
        </header>

        <!-- TELA 1 -->
        <div id="tela1" class="tela">
        
        <!-- CSAT Global -->
        <section class="csat-global">
            <div class="csat-card">
                <div class="csat-icon">
                    <i class="fas fa-star"></i>
                </div>
                <div class="csat-info">
                    <span class="csat-label">CSAT Global</span>
                    <span class="csat-value" id="csatGlobal">92%</span>
                </div>
                <div class="csat-trend positive">
                    <i class="fas fa-arrow-up"></i> +2.5%
                </div>
            </div>
        </section>

        <!-- Voice Section -->
        <section class="section">
            <div class="section-header">
                <h2><i class="fas fa-phone-alt"></i> Atendimento por Voz</h2>
                <div class="csat-badge">
                    <i class="fas fa-star"></i> CSAT Voz: <span id="csatVoz">94%</span>
                </div>
            </div>
            <div class="cards-grid">
                <div class="card">
                    <div class="card-icon green">
                        <i class="fas fa-phone-volume"></i>
                    </div>
                    <div class="card-content">
                        <span class="card-label">Chamadas Atendidas</span>
                        <span class="card-value" id="chamadasAtendidas">847</span>
                        <span class="card-trend positive"><i class="fas fa-arrow-up"></i> +12% hoje</span>
                    </div>
                </div>
                <div class="card">
                    <div class="card-icon red">
                        <i class="fas fa-phone-slash"></i>
                    </div>
                    <div class="card-content">
                        <span class="card-label">Chamadas Abandonadas</span>
                        <span class="card-value" id="chamadasAbandonadas">23</span>
                        <span class="card-trend negative"><i class="fas fa-arrow-down"></i> -5% hoje</span>
                    </div>
                </div>
                <div class="card">
                    <div class="card-icon orange">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="card-content">
                        <span class="card-label">Fila de Espera</span>
                        <span class="card-value" id="filaVoz">8</span>
                        <span class="card-subtext">aguardando atendimento</span>
                    </div>
                </div>
                <div class="card">
                    <div class="card-icon blue">
                        <i class="fas fa-headset"></i>
                    </div>
                    <div class="card-content">
                        <span class="card-label">Em Atendimento</span>
                        <span class="card-value" id="emAtendimentoVoz">15</span>
                        <span class="card-subtext">clientes agora</span>
                    </div>
                </div>
                <div class="card highlight">
                    <div class="card-icon purple">
                        <i class="fas fa-hourglass-half"></i>
                    </div>
                    <div class="card-content">
                        <span class="card-label">Maior Atendimento Aberto</span>
                        <span class="card-value time" id="maiorAtendimentoVoz">00:23:45</span>
                        <span class="card-subtext">Agente: Maria Silva</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Chat Section -->
        <section class="section">
            <div class="section-header">
                <h2><i class="fas fa-comments"></i> Atendimento por Chat</h2>
                <div class="csat-badge">
                    <i class="fas fa-star"></i> CSAT Chat: <span id="csatChat">89%</span>
                </div>
            </div>
            <div class="cards-grid">
                <div class="card">
                    <div class="card-icon orange">
                        <i class="fas fa-user-clock"></i>
                    </div>
                    <div class="card-content">
                        <span class="card-label">Clientes na Fila</span>
                        <span class="card-value" id="clientesFila">12</span>
                        <span class="card-subtext">aguardando atendimento</span>
                        <div class="card-sub-info padrao">
                            <span class="card-label">Maior tempo de espera</span>
                            <strong id="maiorTempoEspera">00:08:32</strong>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-icon yellow">
                        <i class="fas fa-chart-bar"></i>
                    </div>
                    <div class="card-content">
                        <span class="card-label">Média Máx. Espera</span>
                        <span class="card-value time" id="mediaMaxEspera">00:05:18</span>
                        <span class="card-subtext">maior tempo de chat</span>
                        <div class="card-sub-info padrao tempo-medio">
                            <span class="card-label">Tempo médio de espera do dia</span>
                            <strong id="tempoMedioEspera">00:02:45</strong>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-icon blue">
                        <i class="fas fa-comment-dots"></i>
                    </div>
                    <div class="card-content">
                        <span class="card-label">Em Atendimento</span>
                        <span class="card-value" id="emAtendimentoChat">28</span>
                        <span class="card-subtext">chats ativos</span>
                        <div class="card-sub-info maior-atendimento">
                            <span class="card-label">Maior atendimento aberto</span>
                            <strong id="maiorAtendimentoChat">00:45:12</strong>
                            <span class="card-subtext">Agente: <span id="agenteMaiorAtendimentoChat">Carlos Oliveira</span></span>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-icon purple">
                        <i class="fas fa-layer-group"></i>
                    </div>
                    <div class="card-content">
                        <span class="card-label">Backlog de Clientes</span>
                        <span class="card-value" id="backlogTotal">47</span>
                        <div class="csat-mini-card">
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Charts Section - Tela 1 -->
        <section class="section charts-section">
            <div class="charts-grid">
                <!-- Hourly Volume Chart -->
                <div class="chart-card wide">
                    <div class="chart-header">
                        <h3><i class="fas fa-chart-area"></i> Volumetria por Horário</h3>
                        <div class="chart-legend">
                            <span class="legend-item"><span class="dot voz"></span> Voz</span>
                            <span class="legend-item"><span class="dot chat"></span> Chat</span>
                        </div>
                    </div>
                    <canvas id="volumetriaChart"></canvas>
                </div>
            </div>
        </section>
        </div>

        <!-- TELA 2 -->
        <div id="tela2" class="tela" style="display: none;">
        <!-- Gráficos de Análise -->
        <section class="section charts-section">
            <div class="section-header">
                <h2><i class="fas fa-chart-pie"></i> Análise de Atendimento</h2>
            </div>
            <div class="charts-grid">
                <!-- Contact Reasons Chart -->
                <div class="chart-card">
                    <div class="chart-header">
                        <h3><i class="fas fa-tags"></i> Motivos de Contato</h3>
                    </div>
                    <canvas id="motivosChart"></canvas>
                </div>

                <div class="chart-card">
                    <div class="chart-header">
                        <h3><i class="fas fa-user-friends"></i> Status dos Agentes</h3>
                    </div>
                    <canvas id="agentesStatusChart"></canvas>
                </div>

                <!-- Pause Reasons Chart -->
                <div class="chart-card">
                    <div class="chart-header">
                        <h3><i class="fas fa-pause-circle"></i> Agentes em Pausa</h3>
                        <span class="total-pause" id="totalPausa">6 agentes</span>
                    </div>
                    <canvas id="pausaChart"></canvas>
                </div>
            </div>
        </section>

        <!-- Tabela de Agentes -->
        <section class="section">
            <div class="section-header">
                <h2><i class="fas fa-users"></i> Status dos Agentes</h2>
                <div class="table-controls">
                    <select id="agentesFilter">
                        <option value="all">Todos</option>
                        <option value="disponivel">Disponível</option>
                        <option value="ocupado">Ocupado</option>
                        <option value="pausa">Em Pausa</option>
                    </select>
                </div>
            </div>
            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Agente</th>
                            <th>Status</th>
                            <th>Motivo Pausa</th>
                            <th>Tempo no Status</th>
                            <th>Atendimentos Hoje</th>
                            <th>Canal</th>
                        </tr>
                    </thead>
                    <tbody id="agentesTableBody">
                        <!-- Populated by JS -->
                    </tbody>
                </table>
            </div>
        </section>
        </div>

        <!-- TELA 3 - ADERÊNCIA -->
        <div id="tela3" class="tela" style="display: none;">
            <!-- Header Aderência -->
            <section class="section aderencia-header">
                <div class="section-header">
                    <h2><i class="fas fa-clipboard-check"></i> Aderência do Agente</h2>
                    <div class="aderencia-filtros">
                        <div class="filtro-grupo">
                            <label><i class="fas fa-calendar"></i> De</label>
                            <input type="date" id="aderenciaDataInicio" value="2026-02-01">
                        </div>
                        <div class="filtro-grupo">
                            <label><i class="fas fa-calendar-check"></i> Até</label>
                            <input type="date" id="aderenciaDataFim" value="2026-02-04">
                        </div>
                        <div class="filtro-grupo">
                            <label><i class="fas fa-clock"></i> Período</label>
                            <select id="aderenciaPeriodo">
                                <option value="dia">Dia Inteiro</option>
                                <option value="manha">Manhã (06:00 - 12:00)</option>
                                <option value="tarde">Tarde (12:00 - 18:00)</option>
                                <option value="noite">Noite (18:00 - 00:00)</option>
                                <option value="personalizado">Personalizado</option>
                            </select>
                        </div>
                        <div class="filtro-grupo periodo-custom" id="periodoCustom" style="display: none;">
                            <label>De</label>
                            <input type="time" id="horaInicio" value="08:00">
                            <label>Até</label>
                            <input type="time" id="horaFim" value="18:00">
                        </div>
                        <button class="filtro-btn" onclick="aplicarFiltroAderencia()">
                            <i class="fas fa-filter"></i> Aplicar
                        </button>
                        <button class="filtro-btn export-btn" onclick="exportarAderencia()">
                            <i class="fas fa-file-export"></i> Exportar
                        </button>
                    </div>
                </div>
            </section>

            <!-- Cards de Aderência Geral -->
            <section class="section">
                <div class="cards-grid aderencia-cards">
                    <div class="card aderencia-card principal">
                        <div class="card-icon green">
                            <i class="fas fa-percentage"></i>
                        </div>
                        <div class="card-content">
                            <span class="card-label">Aderência Geral</span>
                            <span class="card-value" id="aderenciaGeral">87%</span>
                            <span class="card-trend positive"><i class="fas fa-arrow-up"></i> +3% vs ontem</span>
                        </div>
                    </div>
                    <div class="card aderencia-card">
                        <div class="card-icon blue">
                            <i class="fas fa-sign-in-alt"></i>
                        </div>
                        <div class="card-content">
                            <span class="card-label">Login no Horário</span>
                            <span class="card-value" id="loginHorario">21</span>
                            <span class="card-subtext">de 24 agentes</span>
                        </div>
                    </div>
                    <div class="card aderencia-card">
                        <div class="card-icon orange">
                            <i class="fas fa-hourglass-start"></i>
                        </div>
                        <div class="card-content">
                            <span class="card-label">Atrasos Hoje</span>
                            <span class="card-value" id="atrasosHoje">3</span>
                            <span class="card-subtext">média 12 min</span>
                        </div>
                    </div>
                    <div class="card aderencia-card">
                        <div class="card-icon purple">
                            <i class="fas fa-pause-circle"></i>
                        </div>
                        <div class="card-content">
                            <span class="card-label">Pausas no Limite</span>
                            <span class="card-value" id="pausasLimite">18</span>
                            <span class="card-subtext">de 24 agentes</span>
                        </div>
                    </div>
                    <div class="card aderencia-card">
                        <div class="card-icon red">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <div class="card-content">
                            <span class="card-label">Pausas Excedidas</span>
                            <span class="card-value" id="pausasExcedidas">6</span>
                            <span class="card-subtext">acima do permitido</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Gráficos de Aderência -->
            <section class="section charts-section aderencia-charts">
                <div class="charts-grid">
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3><i class="fas fa-chart-pie"></i> Distribuição de Aderência</h3>
                        </div>
                        <canvas id="aderenciaDistChart"></canvas>
                    </div>
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3><i class="fas fa-chart-bar"></i> Aderência por Hora</h3>
                        </div>
                        <canvas id="aderenciaHoraChart"></canvas>
                    </div>
                </div>
            </section>

            <!-- Tabela Detalhada de Aderência -->
            <section class="section aderencia-table-section">
                <div class="section-header">
                    <h2><i class="fas fa-list"></i> Detalhamento por Agente</h2>
                    <div class="table-controls-extended">
                        <div class="filtro-grupo">
                            <label><i class="fas fa-calendar"></i> De</label>
                            <input type="date" id="tabelaDataInicio" value="2026-02-01">
                        </div>
                        <div class="filtro-grupo">
                            <label><i class="fas fa-calendar-check"></i> Até</label>
                            <input type="date" id="tabelaDataFim" value="2026-02-04">
                        </div>
                        <div class="filtro-grupo">
                            <label><i class="fas fa-user"></i> Agente</label>
                            <select id="aderenciaAgenteFilter">
                                <option value="all">Todos os Agentes</option>
                            </select>
                        </div>
                        <div class="filtro-grupo">
                            <label><i class="fas fa-clock"></i> Período</label>
                            <select id="aderenciaPeriodoTabela">
                                <option value="dia">Dia Inteiro</option>
                                <option value="manha">Manhã</option>
                                <option value="tarde">Tarde</option>
                                <option value="noite">Noite</option>
                            </select>
                        </div>
                        <div class="filtro-grupo">
                            <label><i class="fas fa-flag"></i> Status</label>
                            <select id="aderenciaFilter">
                                <option value="all">Todos</option>
                                <option value="conforme">Conforme</option>
                                <option value="atencao">Atenção</option>
                                <option value="critico">Crítico</option>
                            </select>
                        </div>
                        <button class="filtro-btn export-btn" onclick="exportarTabelaAderencia()">
                            <i class="fas fa-file-excel"></i> Exportar
                        </button>
                    </div>
                </div>
                <div class="table-container aderencia-detalhada">
                    <table class="data-table aderencia-table">
                        <thead>
                            <tr>
                                <th>Atividades Escaladas</th>
                                <th>Hora Escalada</th>
                                <th>Hora Real</th>
                                <th>Min. em Aderência</th>
                                <th>Min. fora Aderência</th>
                                <th>% em Aderência</th>
                                <th>+/- Min. Conformidade</th>
                                <th>% em Conformidade</th>
                                <th>% do Total</th>
                                <th>% do Total Real</th>
                            </tr>
                        </thead>
                        <tbody id="aderenciaTableBody">
                            <!-- Populated by JS -->
                        </tbody>
                    </table>
                </div>
            </section>
        </div>

        <!-- Footer -->
        <footer class="footer">
            <p>© 2026 CVORTEX - Sistema de Gestão de Atendimento</p>
            <p>Última atualização: <span id="lastUpdate"></span></p>
        </footer>
    </main>

    <script src="scripts.js"></script>
</body>
</html>
